<!DOCTYPE html>
<html>
  <head>
    <title>自定义可编辑表格</title>
	
    <meta http-equiv="keywords" content="keyword1,keyword2,keyword3">
    <meta http-equiv="description" content="this is my page">
    <meta http-equiv="content-type" content="text/html; charset=UTF-8">
    
    <style type="text/css">
	table.table-report{
		border-collapse:collapse;
		width:500px;
		border-spacing:0;
	}
	table.table-report th{
		font-size:12px;
		border-top:1px solid #000;
		border-bottom:1px solid #000;
		background:#EEE;
		text-align:center;
		height:30px;
	}
	table.table-report td{
		height:30px;
		/* border-bottom:1px solid #E2E2E2; */
		border:1px solid #000;
		line-height:20px;
		text-align:center;
		width:125px;
	}
	.even{
		background:#FFFFCC;
	}
	.odd{
		background:#FFFF99;
	}
	.selected{
		background:#F0F8FF;
	}
</style>
	<script type="text/javascript" src="js/jquery-1.5.2.js"></script>
	<script type="text/javascript">
	$(function(){
		$("tbody>tr:odd").addClass("odd");
		$("tbody>tr:even").addClass("even");
		
		$("tbody>tr").click(function(){
			var hasSelected = $(this).hasClass("selected");
			$(this)[hasSelected?"removeClass":"addClass"]("selected")
				.find(":checkbox").attr("checked",!hasSelected);
		});
		
		//全选
		$("#checkAll").click(function(){
			$("[name=check]:checkbox").attr("checked",this.checked);
			$("tbody>tr")[this.checked?"addClass":"removeClass"]("selected");
		});
		//加载时就处理选中的行
		$("tbody>tr:has(:checked)").addClass("selected");
		
		//滑动换色
		$("tbody>tr").hover(function(){
			$(this).each(function(){
				var $checked = $(this).find(":checkbox");
				//如果没有被选中采用滑动样式
				if(!$checked.attr("checked")) 
				{
					$(this).addClass("selected");
				} 
			});
		},function(){
			$(this).each(function(){
				var $checked = $(this).find(":checkbox");
				//如果没有被选中采用滑动样式
				if(!$checked.attr("checked")) 
				{
					$(this).removeClass("selected");
				} 
			});
		});
		$("table.table-report  td").click(function(){
			var $this = $(this);
			if($(this).children().is(":input")) return;
			var text = $(this).html();
			if($(this).hasClass("input")){
				$(this).empty();
				$("<input type='text'/>").css("width","125px").css("height",$(this).height()).css("background-color",$(this).css("background-color")).
				css("border",0).css("font-size",$(this).css("font-size")).val(text).
				appendTo($(this)).trigger("focus").keyup(function(event){
					if (event.keyCode == 13){
						$this.html($(this).val());
					}
				});
			}else if($(this).hasClass("select")){
				$(this).empty();
				$("<select></select>").css("width","130px").css("height",$(this).height()).css("background-color",$(this).css("background-color")).
				css("border",0).css("font-size",$(this).css("font-size")).append("<option value='1'>"+"男"+"</option>").append("<option value='2'>"+"女"+"</option>").
				appendTo($(this)).trigger("focus").keyup(function(event){
					if (event.keyCode == 13){
						$this.html($(this).children("option:selected").text());
					}
				});
			}
		});
	});
	</script>

  </head>
  
  <body>
    <table class="table-report">
  		<thead>
  			<tr>
  				<th style="width:50px"><input type="checkbox" id="checkAll" ></th>
  				<th>姓名</th><th>性别</th><th>暂住地</th>
  			</tr>
  		</thead>
  		<tbody>
  			<tr>
  				<td style="width:50px"><input type="checkbox" name="check" ></td>
  				<td class='input'>aa</td><td class='select'>男</td><td>cc</td>
  			</tr>
  			<tr>
  				<td style="width:50px"><input type="checkbox" name="check" ></td>
  				<td class='input'>aa</td><td class='select'>男</td><td>cc</td>
  			</tr>
  			<tr>
  				<td style="width:50px"><input type="checkbox" name="check" ></td>
  				<td class='input'>aa</td><td class='select'>男</td><td>cc</td>
  			</tr>
  			<tr>
  				<td style="width:50px"><input type="checkbox" name="check" ></td>
  				<td class='input'>aa</td><td class='select'>男</td><td>cc</td>
  			</tr>
  			<tr>
  				<td style="width:50px"><input type="checkbox" name="check" ></td>
  				<td class='input'>aa</td><td class='select'>男</td><td>cc</td>
  			</tr>
  			<tr>
  				<td style="width:50px"><input type="checkbox" name="check" ></td>
  				<td class='input'>aa</td><td class='select'>男</td><td>cc</td>
  			</tr>
  			<tr>
  				<td style="width:50px"><input type="checkbox" name="check" ></td>
  				<td class='input'>aa</td><td class='select'>男</td><td>cc</td>
  			</tr>
  			<tr>
  				<td style="width:50px"><input type="checkbox" name="check"  checked="checked" ></td>
  				<td class='input'>aa</td><td class='select'>男</td><td>cc</td>
  			</tr>
  		</tbody>
  	</table>
  </body>
</html>
